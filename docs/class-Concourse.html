<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>Class Concourse | Concourse PHP Driver</title>

	<link rel="stylesheet" href="resources/bootstrap.min.css?973e37a8502921d56bc02bb55321f45b072b6f71">
	<link rel="stylesheet" href="resources/style.css?70c1d062672daa3f906b72e4f5d03d4bc5c4174d">

</head>

<body>
	<nav id="navigation" class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<a href="index.html" class="navbar-brand">Concourse PHP Driver</a>
			</div>
			<div class="collapse navbar-collapse">

                <form id="search" class="navbar-form navbar-left" role="search">
                    <input type="hidden" name="cx" value="">
                    <input type="hidden" name="ie" value="UTF-8">
                    <div class="form-group">
                        <input type="text" name="q" class="search-query form-control" placeholder="Search">
					</div>
				</form>

				<ul class="nav navbar-nav">
					<li>
						<a href="namespace-None.html" title="Summary of None"><span>Namespace</span></a>
					</li>
					<li class="active">
<span>Class</span>					</li>





				</ul>
			</div>
		</div>
	</nav>

	<div id="left">
	<div id="menu">

		<div id="groups">
				<h3>Namespaces</h3>
			<ul>
					<li>
						<a href="namespace-concourse.html">
							concourse<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-concourse.thrift.html">
							thrift<span></span>
						</a>
							<ul>
					<li>
						<a href="namespace-concourse.thrift.exceptions.html">
							exceptions						</a>
							</li>
					<li>
						<a href="namespace-concourse.thrift.shared.html">
							shared						</a>
							</li>
								</ul></li></ul></li>
					<li class="active">
						<a href="namespace-None.html">
							None						</a>
							</li>
			</ul>
		</div>


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li class="active"><a href="class-Concourse.html">Concourse</a></li>
			</ul>





			<h3>Functions</h3>
			<ul>
				<li><a href="function-count_array_keys_intersect.html">count_array_keys_intersect</a></li>
			</ul>
		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
	<div id="rightInner">
<div id="content" class="class">
	<h1>Class Concourse</h1>


	<div class="description">
	<p>This is the main entry point into the PHP Driver for Concourse.</p>

<p>Use Concourse::connect() to create a client connection.</p>
	</div>









	<div class="alert alert-info">
		<b>Final</b><br>
		
		
		

				<b>Author:</b>
				Jeff Nelson<br>
			<b>Located at</b> <a href="source-class-Concourse.html#31-1303" title="Go to source code">Concourse.php</a>
		<br>
	</div>



		<div class="panel panel-default">
			<div class="panel-heading"><h2>Methods summary</h2></div>
			<table class="summary table table-bordered table-striped methods" id="methods">
		<tr data-order="connect" id="_connect">

			<td class="attributes"><code>
				 public static
				<code><a href="class-Concourse.html">Concourse</a></code>
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_connect">#</a>
			<code><a href="source-class-Concourse.html#40-58" title="Go to source code">connect</a>( <span>string <var>$host</var> = <span class="php-quote">&quot;localhost&quot;</span></span>, <span>integer <var>$port</var> = <span class="php-num">1717</span></span>, <span>string <var>$username</var> = <span class="php-quote">&quot;admin&quot;</span></span>, <span>string <var>$password</var> = <span class="php-quote">&quot;admin&quot;</span></span>, <span>string <var>$environment</var> = <span class="php-quote">&quot;&quot;</span></span> )</code>

			<div class="description short">
				<p>Create a new client connection.</p>
			</div>

			<div class="description detailed hidden">
				<p>Create a new client connection.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$host</var></dt>
						<dd>the server host (optional, defaults to 'localhost')</dd>
						<dt><var>$port</var></dt>
						<dd>the listener port (optional, defaults to 1717)</dd>
						<dt><var>$username</var></dt>
						<dd><p>the username with which to connect (optional,
defaults to 'admin')</p></dd>
						<dt><var>$password</var></dt>
						<dd><p>the password for the username (optional,
defaults to 'admin')</p></dd>
						<dt><var>$environment</var></dt>
						<dd><p>the environment to use (optional, defaults
to the 'value of the default_environment' variable in the server's
concourse.prefs file</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						<code><a href="class-Concourse.html">Concourse</a></code>
					</div>

					<h4>Throws</h4>
					<div class="list">
						Exception<br>if the connection cannot be established
					</div>



			</div>
			</div></td>
		</tr>
		<tr data-order="abort" id="_abort">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_abort">#</a>
			<code><a href="source-class-Concourse.html#144-160" title="Go to source code">abort</a>( )</code>

			<div class="description short">
				<p>Abort the current transaction and discard any changes that are
currently staged.</p>
			</div>

			<div class="description detailed hidden">
				<p>Abort the current transaction and discard any changes that are
currently staged.</p>

<p>After returning, the driver will return to <em>autocommit</em> mode and
all subsequent changes will be committed immediately.</p>

<p>Calling this method when the driver is not in <em>staging</em> mode is a
no-op.</p>







			</div>
			</div></td>
		</tr>
		<tr data-order="add" id="_add">

			<td class="attributes"><code>
				 public 
				boolean|array|integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_add">#</a>
			<code><a href="source-class-Concourse.html#162-187" title="Go to source code">add</a>( <span>string <var>$key</var>,…</span>, <span>mixed <var>$value</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span> )</code>

			<div class="description short">
				<p>Append a <em>key</em> as a <em>value</em> in one or more records.</p>
			</div>

			<div class="description detailed hidden">
				<p>Append a <em>key</em> as a <em>value</em> in one or more records.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$value</var>,…</dt>
						<dd>the value to add</dd>
						<dt><var>$record</var>,…</dt>
						<dd><p>the record id where an attempt is made
to add the data (optional)</p></dd>
						<dt><var>$records</var>,…</dt>
						<dd><p>a collection of record ids where an attempt
is made to add the data (optional)</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean|array|integer
					</div>

					<h4>Throws</h4>
					<div class="list">
						Concourse\Thrift\Exceptions\InvalidArgumentException
					</div>

					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>add($key, $value)</strong> - Append <em>key</em> as
<em>value</em> in a new record and return the id.</li>
<li><strong>add($key, $value, $record)</strong> - Append <em>key</em> as
<em>value</em> in <em>record</em> if and only if it doesn't exist and
return a boolean that indicates if the data was added.</li>
<li><strong>add($key, $value, $records)</strong> - Atomically Append
<em>key</em> as <em>value</em> in each of the <em>records</em>
where it doesn't exist and return an associative array associating
each record id to a boolean that indicates if the data was added</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="audit" id="_audit">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_audit">#</a>
			<code><a href="source-class-Concourse.html#189-223" title="Go to source code">audit</a>( <span>string <var>$key</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>integer|string <var>$start</var>,…</span>, <span>integer|string <var>$end</var>,…</span> )</code>

			<div class="description short">
				<p>List changes made to a <em>field</em> or <em>record</em> over time.</p>
			</div>

			<div class="description detailed hidden">
				<p>List changes made to a <em>field</em> or <em>record</em> over time.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record id</dd>
						<dt><var>$start</var>,…</dt>
						<dd><p>an inclusive <em>timestamp </em> of the
oldest change that should possibly be included in the audit -
represented as either a natural language description of a point in time
(i.e. two weeks ago), OR a number of microseconds since the Unix epoch</p></dd>
						<dt><var>$end</var>,…</dt>
						<dd><p>a non-inclusive <em>timestamp</em> for the
most recent change that should possibly be included in the audit</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array<br><p>an associative array associating the <em>Timestamp</em>
of each change to the respective description of the change</p>
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>audit($key, $record)</strong> - Return a list of all the
changes ever made to the <em>key</em> field in <em>record</em>.</li>
<li><strong>audit($key, $record, $start)</strong> - Return a list of
all the changes made to the <em>key</em> field in
<em>record</em> since <em>start</em> (inclusive).</li>
<li><strong>audit($key, $record, $start, $end)</strong> - Return a list
of all the changes
made to the <em>key</em> field in <em>record</em> between
<em>start</em> (inclusive) and <em>end</em> (non-inclusive).</li>
<li><strong>audit($record)</strong> - Return a list of all the changes
ever made to <em>record</em>.</li>
<li><strong>audit($record, $start)</strong> - Return a list of all the
changes made to <em>record</em> since <em>start</em> (inclusive).</li>
<li><strong>audit($record, $start, $end)</strong> - Return a list of
all the changes made to <em>record</em> between <em>start</em>
(inclusive) and <em>end</em> (non-inclusive).</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="browse" id="_browse">

			<td class="attributes"><code>
				 public 
				ArrayAccess
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_browse">#</a>
			<code><a href="source-class-Concourse.html#225-259" title="Go to source code">browse</a>( <span>string <var>$key</var>,…</span>, <span>string <var>$keys</var>,…</span>, <span>integer|string <var>$timestamp</var>,…</span> )</code>

			<div class="description short">
				<p>For one or more <em>fields</em>, view the values from all records
currently or previously stored.</p>
			</div>

			<div class="description detailed hidden">
				<p>For one or more <em>fields</em>, view the values from all records
currently or previously stored.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$keys</var>,…</dt>
						<dd>an array of field names</dd>
						<dt><var>$timestamp</var>,…</dt>
						<dd><p>the historical timestamp to use in the
lookup</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						ArrayAccess
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>browse($key)</strong> - Return a view of the values from all
records that are currently stored for <em>key</em> and return an
ArrayAccess associating each indexed value to an array of records that
contain that value in the <em>key</em> field.</li>
<li><strong>browse($key, $timestamp)</strong> - Return a view of the
values from all records that were stored for <em>key</em> at
<em>timestamp</em> and return an ArrayAccess associating each indexed
value to an array of records that contained that value in the
<em>key</em> field at <em>timestamp</em>.</li>
<li><strong>browse($keys)</strong> - Return a view of the values from all
records that are currently stored for each of the <em>keys</em> and
return an ArrayAccess associating each of the <em>keys</em> to an
ArrayAccess associating each indexed value to an array of records that
contain that value in the <em>key</em> field.</li>
<li><strong>browse($keys, $timestamp)</strong> - Return a view of the
values from all records that were stored for each of the <em>keys</em>
at timestamp and return an ArrayAccess associating each of the
<em>keys</em> to an ArrayAccess associating each indexed value to an
array of records that contain that value in the <em>key</em> field at
<em>timestamp</em>.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="chronologize" id="_chronologize">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_chronologize">#</a>
			<code><a href="source-class-Concourse.html#261-292" title="Go to source code">chronologize</a>( <span>string <var>$key</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>integer|string <var>$start</var>,…</span>, <span>integer|string <var>$end</var>,…</span> )</code>

			<div class="description short">
				<p>Return a time series with snapshots of a <em>field</em> after every
change.</p>
			</div>

			<div class="description detailed hidden">
				<p>Return a time series with snapshots of a <em>field</em> after every
change.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record id</dd>
						<dt><var>$start</var>,…</dt>
						<dd><p>the first possible timestamp to include in
the time series</p></dd>
						<dt><var>$end</var>,…</dt>
						<dd><p>the timestamp that should be greater than
every timestamp in the time series</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array<br><p>associating array associating the timestamp of each
change to the list of values that were stored in the field after that
change.</p>
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>chronologize($key, $record)</strong> - Return a time series
that contains a snapshot of the values stored for <em>key</em> in
<em>record</em> after every change made to the field.
the field after the change.</li>
<li><strong>chronologize($key, $record, $start)</strong> - Return a time
series between <em>start</em> (inclusive) and the present that contains
a snapshot of the values stored for <em>key</em> in <em>record</em>
after every change made to the field during the time span.</li>
<li><strong>chronologize($key, $record, $start, $end)</strong> - Return a
time series between <em>start</em> (inclusive) and <em>end</em>
(non-inclusive) that contains a snapshot of the values stored for
<em>key</em> in <em>record</em> after every change made to the field
during the time span.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="clear" id="_clear">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_clear">#</a>
			<code><a href="source-class-Concourse.html#294-319" title="Go to source code">clear</a>( <span>string <var>$key</var>,…</span>, <span>array <var>$keys</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span> )</code>

			<div class="description short">
				<p>Atomically remove all the values from one or more fields.</p>
			</div>

			<div class="description detailed hidden">
				<p>Atomically remove all the values from one or more fields.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$keys</var>,…</dt>
						<dd>an array of field names</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record id</dd>
						<dt><var>$records</var>,…</dt>
						<dd>an array of record ids</dd>
					</dl></div>



					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>clear($record)</strong> - Atomically remove all the values
stored for every key in &lt;em&lt;record</em>.</li>
<li><strong>clear($records)</strong> - Atomically remove all the values
stored for every key in each of the <em>records</em>.</li>
<li><strong>clear($key, $record)</strong> - Atomically remove all the
values stored for <em>key</em> in <em>record</em>.</li>
<li><strong>clear($keys, $record)</strong> - Atomically remove all the
values stored for each of the <em>keys</em> in <em>record</em>.</li>
<li><strong>clear($key, $records)</strong> - Atomically remove all the
values stored for <em>key</em> in each of the <em>records</em>.</li>
<li><strong>clear($keys, $records)</strong> - Atomically remove all the
values stored for each of the <em>keys</em> in each of the .
<em>records</em></li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="close" id="_close">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_close">#</a>
			<code><a href="source-class-Concourse.html#321-328" title="Go to source code">close</a>( )</code>

			<div class="description short">
				<p>Terminate the client's session and close this connection.
<em>An alias for the #exit() method.</em></p>
			</div>

			<div class="description detailed hidden">
				<p>Terminate the client's session and close this connection.
<em>An alias for the #exit() method.</em></p>







			</div>
			</div></td>
		</tr>
		<tr data-order="commit" id="_commit">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_commit">#</a>
			<code><a href="source-class-Concourse.html#330-352" title="Go to source code">commit</a>( )</code>

			<div class="description short">
				<p>Attempt to permanently commit any changes that are staged in a
transaction and return <em>true</em> if and only if all the changes can
be applied. Otherwise, returns <em>false</em> and all the changes are
discarded.</p>
			</div>

			<div class="description detailed hidden">
				<p>Attempt to permanently commit any changes that are staged in a
transaction and return <em>true</em> if and only if all the changes can
be applied. Otherwise, returns <em>false</em> and all the changes are
discarded.</p>

<p>After returning, the driver will return to <em>autocommit</em> mode and
all subsequent changes will be committed immediately.</p>

<p>This method will return <em>false</em> if it is called when the driver
is not in <em>staging</em> mode.</p>







			</div>
			</div></td>
		</tr>
		<tr data-order="describe" id="_describe">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_describe">#</a>
			<code><a href="source-class-Concourse.html#354-382" title="Go to source code">describe</a>( <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span>, <span>integer|string <var>$timestamp</var>,…</span> )</code>

			<div class="description short">
				<p>For one or more records list all the keys that have at least one value.</p>
			</div>

			<div class="description detailed hidden">
				<p>For one or more records list all the keys that have at least one value.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$record</var>,…</dt>
						<dd>the record id</dd>
						<dt><var>$records</var>,…</dt>
						<dd>a collection of record ids</dd>
						<dt><var>$timestamp</var>,…</dt>
						<dd><p>the historical timestamp to use in the
lookup</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>describe($record)</strong> - Return all the keys in
<em>record</em> that have at least one value and return that Array of
keys.</li>
<li><strong>describe($record, $timestamp)</strong> - Return all the keys
in <em>record</em> that had at least one value at <em>timestamp</em>
and return that Array of keys.</li>
<li><strong>describe($records)</strong> - For each of the <em>records</em>
return all of the keys that have at least one value and return an
Associative Array associating each of the records to the Array of keys
in that record.</li>
<li><strong>describe($records, $timestamp)</strong> - For each of the
<em>records</em>, return all the keys that had at least one value at
<em>timestamp</em> and return an Associative Array associating each of
the records to the Array of keys that were in that record at
<em>timestamp</em>.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="diff" id="_diff">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_diff">#</a>
			<code><a href="source-class-Concourse.html#384-450" title="Go to source code">diff</a>( <span>string <var>$key</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>integer|string <var>$start</var>,…</span>, <span>integer|string <var>$end</var>,…</span> )</code>

			<div class="description short">
				<p>List the net changes made to a field, record or index from one
timestamp to another.</p>
			</div>

			<div class="description detailed hidden">
				<p>List the net changes made to a field, record or index from one
timestamp to another.</p>

<p>If you begin with the state of the <em>record</em> at <em>start</em>
and re-apply all the changes in the diff, you'll re-create the state of
the <em>record</em> at the present.</p>

<p>Unlike the <em>audit(long, Timestamp)</em> method,
<em>diff(long, Timestamp) </em> does not necessarily reflect ALL the
changes made to <em>record</em> during the time span.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record id</dd>
						<dt><var>$start</var>,…</dt>
						<dd><p>the base timestamp from which the diff is
calculated</p></dd>
						<dt><var>$end</var>,…</dt>
						<dd><p>the comparison timestamp to which the diff is
calculated</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>diff($record, $start)</strong> - List the net changes made to
<em>record</em> since <em>start</em>. and return an associative array
that associates each key in <em>record</em> to another associative
array that associates a change description to the array of values that
fit the description (i.e. </li>
</ul>

<pre>{<span class="php-quote">&quot;key&quot;</span>: {ADDED: [<span class="php-quote">&quot;value1&quot;</span>, <span class="php-quote">&quot;value2&quot;</span>], REMOVED: [<span class="php-quote">&quot;value3&quot;</span>, <span class="php-quote">&quot;value4&quot;</span>]}}</pre>

<p>).
* <strong>diff($record, $start, $end)</strong> - List the net changes
made to <em>record</em> from <em>start</em> to <em>end</em> and return
an associative array that associates each key in <em>record</em> to
another associative array that associates a change description to the
array of values that fit the description(i.e.</p>

<pre>{<span class="php-quote">&quot;key&quot;</span>: {ADDED: [<span class="php-quote">&quot;value1&quot;</span>, <span class="php-quote">&quot;value2&quot;</span>], REMOVED: [<span class="php-quote">&quot;value3&quot;</span>, <span class="php-quote">&quot;value4&quot;</span>]}}</pre>

<p>).
* <strong>diff($key, $record, $start)</strong> - List the net changes
made to <em>key</em> in <em>record</em> since <em>start</em> and return
an associative array that associates a change description to the array
of values that fit the description(i.e.</p>

<pre>{ADDED: [<span class="php-quote">&quot;value1&quot;</span>, <span class="php-quote">&quot;value2&quot;</span>], REMOVED: [<span class="php-quote">&quot;value3&quot;</span>, <span class="php-quote">&quot;value4&quot;</span>]}</pre>

<p>).
* <strong>diff($key, $record, $start, $end)</strong> - List the net
changes made to <em>key</em> in <em>record</em> from <em>start</em> to
<em>end</em> and return an associative array that associates a change description
to the array of values that fit the description(i.e.</p>

<pre>{ADDED: [<span class="php-quote">&quot;value1&quot;</span>, <span class="php-quote">&quot;value2&quot;</span>], REMOVED: [<span class="php-quote">&quot;value3&quot;</span>, <span class="php-quote">&quot;value4&quot;</span>]}</pre>

<p>).
* <strong>diff($key, $start)</strong> - List the net changes made to the
<em>key</em> field across all records since <em>start</em> and return
an associative array that associates each value stored for <em>key</em>
across all records to another associative array that associates a change
description to the array of records where the description applies to
that value in the <em>key</em> field(i.e.</p>

<pre>{<span class="php-quote">&quot;value1&quot;</span>: {ADDED: [<span class="php-num">1</span>, <span class="php-num">2</span>], REMOVED: [<span class="php-num">3</span>, <span class="php-num">4</span>]}}</pre>

<p>).
* <strong>diff($key, $start, $end)</strong> - List the net changes made to
the <em>key</em> field across all records from <em>start</em> to
<em>end</em> and return an associative array that associates each value
stored for <em>key</em> across all records to another array that
associates a change description to the array of records where the
description applies to that value in the <em>key</em> field(i.e.</p>

<pre>{<span class="php-quote">&quot;value1&quot;</span>: {ADDED: [<span class="php-num">1</span>, <span class="php-num">2</span>], REMOVED: [<span class="php-num">3</span>, <span class="php-num">4</span>]}}</pre>

<p>)</p><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="find" id="_find">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_find">#</a>
			<code><a href="source-class-Concourse.html#452-487" title="Go to source code">find</a>( <span>mixed <var>$value</var>,…</span>, <span>string <var>$key</var>,…</span>, <span>array <var>$keys</var>,…</span>, <span>Cinchapi\Concourse\Thrift\Shared\Operator|string <var>$operator</var>,…</span>, <span>integer|string <var>$timestamp</var>,…</span> )</code>

			<div class="description short">
				<p>Find the records that satisfy the <em>criteria</em>.</p>
			</div>

			<div class="description detailed hidden">
				<p>Find the records that satisfy the <em>criteria</em>.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$value</var>,…</dt>
						<dd>the criteria value</dd>
						<dt><var>$key</var>,…</dt>
						<dd>the field/index name</dd>
						<dt><var>$keys</var>,…</dt>
						<dd>the collection of field/index names</dd>
						<dt><var>$operator</var>,…</dt>
						<dd>The criteria operator</dd>
						<dt><var>$timestamp</var>,…</dt>
						<dd>the timestamp to use when evaluating the criteria</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array<br>the records that match
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>find($ccl)</strong> - Return the set of records that satisfy
the <em>ccl</em>.</li>
<li><strong>find($key, $value)</strong> - Return the set of records where
<em>key</em> equals <em>value</em>.</li>
<li><strong>find($key, $value, $timestamp)</strong> - Return the set of
records where <em>key</em> equals <em>value</em> at <em>timestamp</em>.</li>
<li><strong>find($key, $operator, $value)</strong> - Return the set of
records where the <em>key</em> field contains at least one value that
satisfies <em>operator</em> in relation to <em>value</em>.</li>
<li><strong>find($key, $operator, $value, $timestamp)</strong> - Return
the set of records where the <em>key</em> field contains at least one
value that satisfies <em>operator</em> in relation to <em>value</em>
at <em>timestamp</em>.</li>
<li><strong>find($key, $operator, $value, $value2)</strong> - Return the
set of records where the <em>key</em> field contains at least one value
that satisfies <em>operator</em> in relation to <em>value</em>.</li>
<li><strong>find($key, $operator, $value, $value2, $timestamp)</strong> -
Return the set of records where the <em>key</em> field contains at
least one value that satisfies <em>operator</em> in relation to
<em>value</em> at <em>timestamp</em>.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="findOrAdd" id="_findOrAdd">

			<td class="attributes"><code>
				 public 
				integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_findOrAdd">#</a>
			<code><a href="source-class-Concourse.html#489-514" title="Go to source code">findOrAdd</a>( <span>string <var>$key</var>,…</span>, <span>mixed <var>$value</var>,…</span> )</code>

			<div class="description short">
				<p>Return the unique record where the <em>key</em> equals <em>value</em>,
or throw a DuplicateEntryException if multiple records match the
condition. If no record matches, add <em>key</em> as <em>value</em> in
a new record and return the id.</p>
			</div>

			<div class="description detailed hidden">
				<p>Return the unique record where the <em>key</em> equals <em>value</em>,
or throw a DuplicateEntryException if multiple records match the
condition. If no record matches, add <em>key</em> as <em>value</em> in
a new record and return the id.</p>

<p>This method can be used to simulate a unique index because it atomically
checks for a condition and only adds data if the condition isn't
currently satisified.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$value</var>,…</dt>
						<dd><p>the value to find for <em>key</em> or add in a
new record</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						integer<br><p>The unique record where <em>key</em> = <em>value</em>,
if it exists or the new record where <em>key</em> as <em>value</em> is
added.</p>
					</div>

					<h4>Throws</h4>
					<div class="list">
						Thrift\Exceptions\DuplicateEntryException
					</div>



			</div>
			</div></td>
		</tr>
		<tr data-order="findOrInsert" id="_findOrInsert">

			<td class="attributes"><code>
				 public 
				integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_findOrInsert">#</a>
			<code><a href="source-class-Concourse.html#516-557" title="Go to source code">findOrInsert</a>( <span>string <var>$criteria</var>,…</span>, <span>mixed <var>$data</var>,…</span> )</code>

			<div class="description short">
				<p>Return the unique record that matches the <em>criteria</em>, if one
exist or throw a DuplicateEntryException} if multiple records match.
If no record matches, <em>insert</em> the <em>data</em> in a new
record and return the id.</p>
			</div>

			<div class="description detailed hidden">
				<p>Return the unique record that matches the <em>criteria</em>, if one
exist or throw a DuplicateEntryException} if multiple records match.
If no record matches, <em>insert</em> the <em>data</em> in a new
record and return the id.</p>

<p>This method can be used to simulate a unique index because it atomically
checks for a condition and only inserts data if the condition isn't
currently satisified.</p>

<p>Each of the values in <em>data</em> must be a primitive or one
dimensional object (e.g. no nested <em>associated arrays</em> or <em>multimaps</em>).</p>

<p>This method is syntactic sugar for <em>#findOrInsert(Criteria, Map)</em>.
The only difference is that this method takes a in-process
<em>Criteria</em> building sequence for convenience.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$criteria</var>,…</dt>
						<dd><p>an in-process <em>Criteria</em> building
sequence that contains an <em>BuildableState#build()
unfinalized</em>, but well-formed filter for the desired
record</p></dd>
						<dt><var>$data</var>,…</dt>
						<dd><p>an <em>associative array</em> with key/value
associations to insert into the new record</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						integer<br><p>The unique record that matches the <em>criteria</em>,
if it exists or the new record where <em>data</em>
is inserted.</p>
					</div>

					<h4>Throws</h4>
					<div class="list">
						Thrift\Exceptions\DuplicateEntryException
					</div>



			</div>
			</div></td>
		</tr>
		<tr data-order="get" id="_get">

			<td class="attributes"><code>
				 public 
				mixed
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_get">#</a>
			<code><a href="source-class-Concourse.html#559-632" title="Go to source code">get</a>( <span>string <var>$key</var>,…</span>, <span>array <var>$keys</var>,…</span>, <span>string <var>$criteria</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span>, <span>integer|string <var>$timestamp</var>,…</span> )</code>

			<div class="description short">
				<p>Get the most recently added value/s.</p>
			</div>

			<div class="description detailed hidden">
				<p>Get the most recently added value/s.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$keys</var>,…</dt>
						<dd>the collection of multiple field names</dd>
						<dt><var>$criteria</var>,…</dt>
						<dd>the criteria that determines the record from which data is retrieved</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record from which data is retrieved</dd>
						<dt><var>$records</var>,…</dt>
						<dd>the collection of muliple records from which data is retrieved</dd>
						<dt><var>$timestamp</var>,…</dt>
						<dd>the timestamp to use when getting data</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						mixed
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>get($criteria)</strong> - For every key in every record that
matches the <em>criteria</em>, return an associated array associating
each of the <em>records</em> to another associated array associating
each of the <em>keys</em> to the freshest value in the field.</li>
<li><strong>get($criteria, $timestamp)</strong> -  For every key in every
record that matches the <em>criteria</em>, return an associated array
associating each of the <em>records</em> to another associated array
associating each of the <em>keys</em> to the freshest value in the
field at <em>timestamp</em>.</li>
<li><strong>get($key, $criteria)</strong> - For every record that matches
the <em>criteria</em>, return an <em>associated array</em> associating
each of the matching records to the freshest value in the <em>key</em>
field.</li>
<li><strong>get($key, $criteria, $timestamp)</strong> - For every record
that matches the <em>criteria</em>, return an <em>associated array</em>
associating each of the matching records to the freshest value in the
<em>key</em> field at <em>timestamp</em>.</li>
<li><strong>get($keys, $criteria)</strong> - For each of the <em>keys</em>
in every record that matches the <em>criteria</em>, return an associated
array associating each of the <em>records</em> to another associated
array associating each of the <em>keys</em> to the freshest value in
the field.</li>
<li><strong>get($keys, $criteria, $timestamp)</strong> - For each of the
<em>keys</em> in every record that matches the <em>criteria</em>, return
an associated array associating each of the <em>records</em> to another
associated array associating each of the <em>keys</em> to the freshest
value in the field at <em>timestamp</em>.</li>
<li><strong>get($key, $record)</strong> - Return the stored freshest value
in the field that was most recently added for <em>key</em> in
<em>record</em>. If the field is empty, return <em>null</em>.</li>
<li><strong>get($key, $records)</strong> - For each of the <em>records</em>
, return an <em>associative array</em> associating each of the
<em>records</em> to the freshest value in the <em>key</em> field.</li>
<li><strong>get($key, $records, $timestamp)</strong> - For each of the
<em>records</em>, return an <em>associative array</em> associating each
of the <em>records</em> to the freshest value in the <em>key</em> field
at <em>timestamp</em>.</li>
<li><strong>get($key, $record, $timestamp)</strong> - Return the stored
freshest value in the field that was most recently added for
<em>key</em> in <em>record</em>. If the field is empty, return
<em>null</em> at <em>timestamp</em>.</li>
<li><strong>get($keys, $record)</strong> - For each of the <em>keys</em>
in <em>record</em> return an <em>associated array</em> associating each
of the <em>keys</em> to the freshest value in the field.</li>
<li><strong>get($keys, $record, $timestamp)</strong> - For each of the
<em>keys</em> in <em>record</em> return an <em>associated array</em>
associating each of the <em>keys</em> to the freshest value in the
field at <em>timestamp</em>.</li>
<li><strong>get($keys, $records)</strong> - For each of the <em>keys</em>
in each of the <em>records</em>, return a an associated array
associating each of the <em>records</em> to another associated array
associating each of the <em>keys</em> to the freshest value in the
field.</li>
<li><strong>get($keys, $records, $timestamp)</strong> - For each of the
<em>keys</em> in each of the <em>records</em>, return an <em>associated
array</em> associating each of the <em>records</em> to another
<em>associated array</em> associating each of the <em>keys</em> to the
freshest value in the field at <em>timestamp</em>.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="getServerEnvironment" id="_getServerEnvironment">

			<td class="attributes"><code>
				 public 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_getServerEnvironment">#</a>
			<code><a href="source-class-Concourse.html#634-641" title="Go to source code">getServerEnvironment</a>( )</code>

			<div class="description short">
				<p>Return the name of the connected environment.</p>
			</div>

			<div class="description detailed hidden">
				<p>Return the name of the connected environment.</p>



					<h4>Returns</h4>
					<div class="list">
						string<br>the server environment to which this client is connected
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="getServerVersion" id="_getServerVersion">

			<td class="attributes"><code>
				 public 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_getServerVersion">#</a>
			<code><a href="source-class-Concourse.html#643-650" title="Go to source code">getServerVersion</a>( )</code>

			<div class="description short">
				<p>Return the version of the connected server.</p>
			</div>

			<div class="description detailed hidden">
				<p>Return the version of the connected server.</p>



					<h4>Returns</h4>
					<div class="list">
						string<br>the server version
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="insert" id="_insert">

			<td class="attributes"><code>
				 public 
				array|boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_insert">#</a>
			<code><a href="source-class-Concourse.html#652-743" title="Go to source code">insert</a>( <span>mixed <var>$data</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span> )</code>

			<div class="description short">
				<p>Atomically bulk insert data. This operation is atomic within each record,
which means that an insert will only succeed in a record if all the data
can be successfully added. Therefore, an insert will fail in a record if
any of the insert data is already contained.</p>
			</div>

			<div class="description detailed hidden">
				<p>Atomically bulk insert data. This operation is atomic within each record,
which means that an insert will only succeed in a record if all the data
can be successfully added. Therefore, an insert will fail in a record if
any of the insert data is already contained.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$data</var>,…</dt>
						<dd>the data to insert</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record into which the data is inserted</dd>
						<dt><var>$records</var>,…</dt>
						<dd>the records into which the data is inserted</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array|boolean
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>insert($data)</strong> - Atomically insert the key/value
associations from one or more of the <em>associated arrays</em> in <em>
data </em> into new and distinct records and return an <em>array</em>
containing the ids of the new records where the maps in <em>data</em>
were inserted, respectively and return <em>true</em> if all of the
<em>associated array</em> is successfully inserted into <em>record</em>,
otherwise <em>false</em>.</li>
</ul>

<p>Each of the values in each map in <em>data<em> must be a primitive or
one dimensional object (e.g. no nested <em>associated arrays</em>).</p>

<ul>
<li><strong>insert($data, $record)</strong> - Atomically insert the
key/value associations from <em>associated array</em> data into
<em>record</em>, if possible.</li>
</ul>

<p>The insert will fail if any of the key/value associations in
<em>associated array</em> data currently exist in <em>record</em>.</p>

<p>Each of the values in <em>associated array</em> must be a primitive or
one dimensional object (e.g. no nested <em>associated arrays</em>).</p>

<ul>
<li><strong>insert($data, $records)</strong> - Atomically insert the
key/value associations from <em>associated arrays</em> data into each of
the <em>records</em>, if possible.</li>
</ul>

<p>An insert will fail for a given record if any of the key/value
associations in <em>associated arrays</em> data currently exist in that
record and return an <em>associated array</em> associating each record
id to a boolean that indicates if the <em>data</em> was successfully
inserted in that record.</p>

<p>Each of the values in <em>data</em> must be a primitive or one
dimensional object (e.g. no nested <em>associated arrays</em>).</p>

<ul>
<li><strong>insert($json)</strong> - Atomically insert the key/value
associations from the {@code json} string into as many new records as
necessary and return an <em>array</em> that contains the record ids where
the data was inserted.</li>
</ul>

<p>If the <em>json</em> string contains a top-level array (of objects), this
method will insert each of the objects in a new and distinct record. The
<em>array</em> that is returned will contain the ids of all those
records. On the other hand, if the <em>json</em> string contains a
single top-level object, this method will insert that object in a single
new record. The <em>array</em> that is returned will only contain the id
of that record.</p>

<p>Regardless of whether the top-level element is an object or an array,
each object in the <em>json</em> string contains one or more keys, each
of which maps to a JSON primitive or an array of JSON primitives (e.g. no
nested objects or arrays).</p>

<ul>
<li><strong>insert($json, $records)</strong> - Atomically insert the
key/value associations from the <em>json</em> object
into each of the <em>records</em>, if possible and return an
<em>associative array</em> associating each record id to a boolean that
indicates if the <em>json</em> was successfully inserted in that record.</li>
</ul>

<p>An insert will fail for a given record if any of the key/value
associations in the <em>json</em> object currently exist in that record.</p>

<p>The <em>json</em> must contain a top-level object that contains one or
more keys, each of which maps to a JSON primitive or an array of JSON
primitives (e.g. no nested objects or arrays).</p>

<ul>
<li><strong>insert($json, $record)</strong> - Atomically insert the
key/value associations from the <em>json</em> object
into <em>record</em>, if possible and return <em>true</em> if the
<em>json</em> is inserted into <em>record</em>.</li>
</ul>

<p>The insert will fail if any of the key/value associations in the
<em>json</em> object currently exist in <em>record</em>.</p>

<p>The <em>json</em> must contain a JSON object that contains one or more
keys, each of which maps to a JSON primitive or an array of JSON
primitives.</p><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="inventory" id="_inventory">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_inventory">#</a>
			<code><a href="source-class-Concourse.html#745-753" title="Go to source code">inventory</a>( )</code>

			<div class="description short">
				<p>Return all the records that have current or historical data.</p>
			</div>

			<div class="description detailed hidden">
				<p>Return all the records that have current or historical data.</p>



					<h4>Returns</h4>
					<div class="list">
						array<br><p>containing the ids of records that have current or
        historical data</p>
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="jsonify" id="_jsonify">

			<td class="attributes"><code>
				 public 
				string
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_jsonify">#</a>
			<code><a href="source-class-Concourse.html#755-813" title="Go to source code">jsonify</a>( <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span>, <span>integer|string <var>$timestamp</var>,…</span>, <span>boolean <var>$includeId</var>,…</span> )</code>

			<div class="description short">
				<p>Export data as a JSON string.</p>
			</div>

			<div class="description detailed hidden">
				<p>Export data as a JSON string.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$record</var>,…</dt>
						<dd>the id of the record to dump</dd>
						<dt><var>$records</var>,…</dt>
						<dd>an array containing the ids of all the records to dump</dd>
						<dt><var>$timestamp</var>,…</dt>
						<dd>the timestamp to use when selecting the data to dump</dd>
						<dt><var>$includeId</var>,…</dt>
						<dd>a flag that determines whether record ids are included in the data dump</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						string<br>the data encoded as a JSON string
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>jsonify($record)</strong> - Atomically dump all the data in
<em>record</em> as a JSON object.</li>
<li><strong>jsonify($record, $timestamp)</strong> - Atomically dump all the
data in <em>record<em/> at <em>timestamp</em> as a JSON object.</li>
<li><strong>jsonify($record, $includeId)</strong> - Atomically dump all the
data in <em>record</em> as a JSON object and optionally include a special
<em>identifier</em> key that contains the record id.</li>
<li><strong>jsonify($record, $timestamp, $includeId)</strong> - Atomically
dump all the data in <em>record<em> at <em>timestamp</em> as a JSON
object and optionally include a special <em>identifier</em> key that
contains the record id.</li>
<li><strong>jsonify($records)</strong> - Atomically dump the data in each
of the <em>records</em> as a JSON array of objects.</li>
<li><strong>jsonify($records, $timestamp)</strong> - Atomically dump the
data in each of the <em>records<em> at <em>timestamp<em> as a JSON array
of objects.</li>
<li><strong>jsonify($records, $includeId)</strong> - Atomically dump the
data in each of the <em>records</em> as a JSON array of objects and
optionally include a special <em>identifier</em> key that contains the
record id for each of the dumped objects.</li>
<li><strong>jsonify($records, $timestamp, $includeId)</strong> - Atomically
dump the data in each of the <em>records</em> at <em>timestamp</em> as
a JSON array of objects and optionally include a special <em>identifier
</em> key that contains the record id for each of the dumped objects.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="link" id="_link">

			<td class="attributes"><code>
				 public 
				boolean|array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_link">#</a>
			<code><a href="source-class-Concourse.html#815-853" title="Go to source code">link</a>( <span>string <var>$key</var>,…</span>, <span>integer <var>$source</var>,…</span>, <span>integer <var>$destination</var>,…</span>, <span>array <var>$destinations</var>,…</span> )</code>

			<div class="description short">
				<p>Add a link from a field in the <em>source</em> to one or more <em>destination</em> records.</p>
			</div>

			<div class="description detailed hidden">
				<p>Add a link from a field in the <em>source</em> to one or more <em>destination</em> records.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$source</var>,…</dt>
						<dd>the source record</dd>
						<dt><var>$destination</var>,…</dt>
						<dd>the destination record</dd>
						<dt><var>$destinations</var>,…</dt>
						<dd>the destination records</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean|array<br><p>return boolean or an associative array
associating the ids for each of the <em>destinations</em> to a boolean
that indicates whether the link was successfully added.</p>
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>link($key, $source, $destination)</strong> -Append a link from
<em>key</em> in <em>source</em> to <em>destination</em>.</li>
<li><strong>link($key, $source, $destinations)</strong> - Append links
from <em>key</em> in <em>source</em> to each of the
<em>destinations</em></li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="ping" id="_ping">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_ping">#</a>
			<code><a href="source-class-Concourse.html#865-883" title="Go to source code">ping</a>( <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span> )</code>

			<div class="description short">
				<p>Check if data currently exists.</p>
			</div>

			<div class="description detailed hidden">
				<p>Check if data currently exists.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$record</var>,…</dt>
						<dd>the record to ping</dd>
						<dt><var>$records</var>,…</dt>
						<dd>the records to ping</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean<br><p>(<em>true</em> if <em>record</em> currently contains
any data, otherwise <em>false</em>) | an associated array associating
each of the boolean that indicates whether that record currently
contains any data.</p>
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>ping($record)</strong> - Check to see if <em>record</em>
currently contains any data.</li>
<li><strong>ping($records)</strong> - Atomically check to see if each of
the <em>records</em> currently contains any data.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="remove" id="_remove">

			<td class="attributes"><code>
				 public 
				boolean|array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_remove">#</a>
			<code><a href="source-class-Concourse.html#885-906" title="Go to source code">remove</a>( <span>string <var>$key</var>,…</span>, <span>mixed <var>$value</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span> )</code>

			<div class="description short">
				<p>Remove a value if it exists.</p>
			</div>

			<div class="description detailed hidden">
				<p>Remove a value if it exists.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$value</var>,…</dt>
						<dd>the value to remove from the field</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record that contains the field</dd>
						<dt><var>$records</var>,…</dt>
						<dd>the records that contain the field</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean|array
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>remove($key, $value, $record)</strong> - Remove <em>key</em> as
<em>value</em> from <em>record</em> if it currently exists
and return <em>true</em> if the data is removed.</li>
<li><strong>remove($key, $value, $records)</strong> - Atomically remove
<em>key</em> as {@code value} from each of the <em>records</em> where
it currently exists and return an <em>associated array</em> associating
each of the <em>records</em> to a boolean that indicates whether the
data was removed.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="revert" id="_revert">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_revert">#</a>
			<code><a href="source-class-Concourse.html#908-937" title="Go to source code">revert</a>( <span>string <var>$key</var>,…</span>, <span>array <var>$keys</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>array <var>$records</var>,…</span>, <span>integer|string <var>$timestamp</var>,…</span> )</code>

			<div class="description short">
				<p>Atomically return data to a previous state.</p>
			</div>

			<div class="description detailed hidden">
				<p>Atomically return data to a previous state.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$keys</var>,…</dt>
						<dd>the field names</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record that contains the field/s</dd>
						<dt><var>$records</var>,…</dt>
						<dd>the records that contain the field/s</dd>
						<dt><var>$timestamp</var>,…</dt>
						<dd>the timestamp of the state to restore</dd>
					</dl></div>



					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>revert($key, $record, $timestamp)</strong> - Atomically revert
<em>key</em> in <em>record</em> to its state at <em>timestamp</em> by
creating new revisions that undo the net changes that have occurred
since <em>timestamp</em>.</li>
<li><strong>revert($keys, $record, $timestamp)</strong> - Atomically revert
each of the <em>keys</em> in <em>record</em> to their state at
</em>timestamp</em> by creating new revisions that undo the net changes
that have occurred since <em>timestamp</em>.</li>
<li><strong>revert($key, $records, $timestamp)</strong> - Atomically revert
<em>key</em> in each of the <em>records</em> to its state at
<em>timestamp</em> by creating new revisions that undo the net changes
that have occurred since <em>timestamp</em>.</li>
<li><strong>revert($keys, $records, $timestamp)</strong> - Atomically
revert each of the <em>keys</em> in each of the <em>records</em> to
their state at <em>timestamp</em> by creating new revisions that undo
the net changes that have occurred since <em>timestamp</em></li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="search" id="_search">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_search">#</a>
			<code><a href="source-class-Concourse.html#939-959" title="Go to source code">search</a>( <span>string <var>$key</var>,…</span>, <span>string <var>$query</var>,…</span> )</code>

			<div class="description short">
				<p>Perform a full text search for <em>query<em> against the <em>key<em>
field and return the records that contain a <em>String<em> or
<em>Tag<em> value that matches.</p>
			</div>

			<div class="description detailed hidden">
				<p>Perform a full text search for <em>query<em> against the <em>key<em>
field and return the records that contain a <em>String<em> or
<em>Tag<em> value that matches.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$query</var>,…</dt>
						<dd>the search query to match</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array<br>array of ids for records that match the search query.
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="select" id="_select">

			<td class="attributes"><code>
				 public 
				array
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_select">#</a>
			<code><a href="source-class-Concourse.html#961-1030" title="Go to source code">select</a>( <span>string <var>$key</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>integer|string <var>$timestamp</var>,…</span> )</code>

			<div class="description short">
				<p>Select all values.</p>
			</div>

			<div class="description detailed hidden">
				<p>Select all values.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>a key from which to select values (optional)</dd>
						<dt><var>$record</var>,…</dt>
						<dd><p>a record from which to select data (required if
$criteria and $records is unspecified)</p></dd>
						<dt><var>$timestamp</var>,…</dt>
						<dd><p>the timestamp to use when selecting data
(optional)</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						array
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>select($key, $record)</strong> - Return all the values stored
for <em>key</em> in <em>record</em>. Return an <em>array</em> containing
all the values stored in the field.</li>
<li><strong>select($key, $records)</strong> - Return all values stored for
<em>key</em> in each of the <em>records</em>. Return an <em>associated
array</em> associating each of the <em>records</em> to an <em>array</em>
containing all the values stored in the respective field.</li>
<li><strong>select($key, $record, $timestamp)</strong> - Return all the
values stored for <em>key</em> in <em>record</em> at <em>timestamp</em>.
Return an <em>array</em> containing all the values stored in the field
at <em>timestamp</em>.</li>
<li><strong>select($keys, $record)</strong> - Return all the values stored
for each of the <em>keys</em> in <em>record</em> and return an
<em>associated array</em> associating each of the <em>keys</em> to an
<em>array</em> containing all the values stored in the respective field.</li>
<li><strong>select($keys, $record, $timestamp)</strong> - Return all the
values stored for each of the <em>keys</em> in <em>record</em> at
<em>timestamp</em>. Return an <em>associated array</em> associating
each of the <em>keys</em> to an <em>array</em> containing all the values
stored in the respective field at <em>timestamp</em>.</li>
<li><strong>select($keys, $records, $timestamp)</strong> - return a
<em>associated array</em> associating each of the <em>records<em> to
another <em>associated array</em> associating each of the <em>keys</em>
to an <em>array</em> containing all the values stored in the respective
field at <em>timestamp</em>.</li>
<li><strong>select($keys, $records)</strong> - return a <em>associated
array</em> associating each of the <em>records</em> to another
<em>associated array</em> associating each of the <em>keys<em> to an
<em>array</em> containing all the values stored in the respective field.</li>
<li><strong>select($key, $records, $timestamp)</strong> - Return all values
stored for <em>key</em> in each of the <em>records</em> at
<em>timestamp</em>. Return an <em>associated array</em> associating each
of the <em>records</em> to an <em>array</em> containing all the values
stored in the respective field at <em>timestamp</em>.</li>
<li><strong>select($record)</strong> - return an <em>associated array</em>
associating each key in <em>record</em> to an <em>array</em> containing
all the values stored in the respective field.</li>
<li><strong>select($record, $timestamp)</strong> - return an <em>associated
array</em> associating each key in <em>record</em> to an <em>array</em>
containing all the values stored in the respective field at
<em>timestamp</em>.</li>
<li><strong>select($records)</strong> - Return an
<em>associated array</em> associating each of the <em>records</em> to
another <em>associated array</em> associating every key in that record
to an <em>array</em> containing all the values stored in the respective
field.</li>
<li><strong>select($records, $timestamp)</strong> - Return an
<em>associated array</em> associating each of the <em>records
</em> to another <em>associated array</em> associating every key in
that record at <em>timestamp</em> to an <em>array</em> containing all
the values stored in the respective field at <em>timestamp</em>.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="set" id="_set">

			<td class="attributes"><code>
				 public 
				|integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_set">#</a>
			<code><a href="source-class-Concourse.html#1032-1052" title="Go to source code">set</a>( <span>string <var>$key</var>,…</span>, <span>mixed <var>$value</var>,…</span>, <span>integer <var>$record</var>,…</span> )</code>

			<div class="description short">
				<p>Atomically remove all existing values from a field and add a new one.</p>
			</div>

			<div class="description detailed hidden">
				<p>Atomically remove all existing values from a field and add a new one.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$value</var>,…</dt>
						<dd>the value to add to the field</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record in which to set $value for $key (optional)</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						|integer
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>set($key, $value, $record)</strong> - Atomically remove all the
values stored for <em>key</em> in <em>record</em> and add then
<em>key</em> as <em>value</em>.</li>
<li><strong>set($key, $value, $records)</strong> - In each of the
<em>records</em>, atomically remove all the values stored for
<em>key</em> and then add <em>key</em> as <em>value</em> in the
respective record.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="stage" id="_stage">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_stage">#</a>
			<code><a href="source-class-Concourse.html#1054-1109" title="Go to source code">stage</a>( <span> <var>$lambda</var> = <span class="php-keyword1">null</span></span> )</code>

			<div class="description short">
				<p>Start a new transaction.</p>
			</div>

			<div class="description detailed hidden">
				<p>Start a new transaction.</p>

<p>This method will turn on <em>staging</em> mode so that all subsequent
changes are collected in an isolated buffer before possibly being
committed. Staged operations are guaranteed to be reliable, all or
nothing, units of work that allow correct recovery from failures and
provide isolation between clients so the database is always consistent.</p>

<p>After this method returns, all subsequent operations will be done in
<em>staging<em> mode until either #commit or #abort is invoked.</p>

<p>All operations that occur within a transaction should be wrapped in a
try-catch block so that transaction exceptions can be caught and the
transaction can be properly aborted.</p>

<pre><span class="php-var">$concourse</span>-&gt;stage();
    <span class="php-keyword1">try</span> {
        <span class="php-var">$concourse</span>-&gt;get([<span class="php-quote">&quot;key&quot;</span> =&gt; <span class="php-quote">&quot;name&quot;</span>, <span class="php-quote">&quot;record&quot;</span> =&gt; <span class="php-num">1</span>]);
        <span class="php-var">$concourse</span>-&gt;add(<span class="php-quote">&quot;name&quot;</span>, <span class="php-quote">&quot;Jeff Nelson&quot;</span>, <span class="php-num">1</span>);
        <span class="php-var">$concourse</span>-&gt;commit();
    }
    <span class="php-keyword1">catch</span>(Cinchapi\Concourse\Thrift\Exceptions\TransactionException <span class="php-var">$e</span>) {
        <span class="php-var">$concourse</span>-&gt;abort();
    }</pre>

<p>Alternatively, if you supply a block to this method, starting and
committing the transactions happens automatically and there is also
automatic logic to gracefully handle exceptions that may result from
any of the actions in the transaction.</p>

<pre><span class="php-var">$concourse</span>-&gt;stage(<span class="php-keyword1">function</span>() <span class="php-keyword1">use</span>(<span class="php-var">$concourse</span>){
        <span class="php-var">$concourse</span>-&gt;get([<span class="php-quote">&quot;key&quot;</span> =&gt; <span class="php-quote">&quot;name&quot;</span>, <span class="php-quote">&quot;record&quot;</span> =&gt; <span class="php-num">1</span>]);
        <span class="php-var">$concourse</span>-&gt;add(<span class="php-quote">&quot;name&quot;</span>, <span class="php-quote">&quot;Jeff Nelson&quot;</span>, <span class="php-num">1</span>);
    });</pre>







			</div>
			</div></td>
		</tr>
		<tr data-order="time" id="_time">

			<td class="attributes"><code>
				 public 
				integer
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_time">#</a>
			<code><a href="source-class-Concourse.html#1111-1129" title="Go to source code">time</a>( <span>string <var>$phrase</var>,…</span> )</code>

			<div class="description short">
				<p>Return the server's unix timestamp in microseconds. The precision of the
timestamp is subject to network latency.</p>
			</div>

			<div class="description detailed hidden">
				<p>Return the server's unix timestamp in microseconds. The precision of the
timestamp is subject to network latency.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$phrase</var>,…</dt>
						<dd>a natural language phrase that describes the desired timestamp (i.e. 3 weeks ago, last month, yesterday at 3:00pm, etc) (optional)</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						integer<br>a unix timestamp in microseconds
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>time()</strong> - Return a <em>Timestamp</em> that represents
the current instant according to the server.</li>
<li><strong>time($micros)</strong> - Return a <em>Timestamp</em> that
corresponds to the specified number of <em>micros</em>econds since the
Unix epoch.</li>
<li><strong>time($phrase)</strong> - Return the <em>Timestamp</em>,
according to the server, that corresponds to the instant described by
the <em>phrase</em>.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="unlink" id="_unlink">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_unlink">#</a>
			<code><a href="source-class-Concourse.html#1131-1166" title="Go to source code">unlink</a>( <span>string <var>$key</var>,…</span>, <span>integer <var>$source</var>,…</span>, <span>integer <var>$destination</var>,…</span> )</code>

			<div class="description short">
				<p>Remove the link from a key in the <em>source</em> to one or more
<em>destination</em> records.</p>
			</div>

			<div class="description detailed hidden">
				<p>Remove the link from a key in the <em>source</em> to one or more
<em>destination</em> records.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$source</var>,…</dt>
						<dd>the source record</dd>
						<dt><var>$destination</var>,…</dt>
						<dd><p>the destination record (required if
$destinations is unspecified)</p></dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>unlink($key, $source, $destination)</strong> - If it exists,
remove the link from {@code key} in <em>source</em> to <em>destination
</em> and return <em>true</em> if the link is removed.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="verify" id="_verify">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_verify">#</a>
			<code><a href="source-class-Concourse.html#1168-1185" title="Go to source code">verify</a>( <span>string <var>$key</var>,…</span>, <span>mixed <var>$value</var>,…</span>, <span>integer <var>$record</var>,…</span> )</code>

			<div class="description short">
				<p>Remove the link from a key in the <em>source</em> to one or more <em>destination</em> records.</p>
			</div>

			<div class="description detailed hidden">
				<p>Remove the link from a key in the <em>source</em> to one or more <em>destination</em> records.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$value</var>,…</dt>
						<dd>the value to check</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record id</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean
					</div>


					<h4>Api</h4>
					<div class="list">
							<ul>
<li><strong>verify($key, $value, $record)</strong> - Return <em>true</em>
if <em>value</em> is stored for <em>key</em> in <em>record</em>.</li>
<li><strong>verify($key, $value, $record, $timestamp)</strong> - Return
<em>true</em> if <em>value</em> was stored for <em>key</em> in
<em>record</em> at <em>timestamp</em>.</li>
</ul><br>
					</div>


			</div>
			</div></td>
		</tr>
		<tr data-order="verifyAndSwap" id="_verifyAndSwap">

			<td class="attributes"><code>
				 public 
				boolean
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_verifyAndSwap">#</a>
			<code><a href="source-class-Concourse.html#1187-1215" title="Go to source code">verifyAndSwap</a>( <span>string <var>$key</var>,…</span>, <span>mixed <var>$value</var>,…</span>, <span>integer <var>$record</var>,…</span>, <span>mixed <var>$replacement</var>,…</span> )</code>

			<div class="description short">
				<p>Atomically replace <em>expected</em> with <em>replacement</em> for
<em>key</em> in <em>record</em> if and only if <em>expected</em> is
currently stored in the field.</p>
			</div>

			<div class="description detailed hidden">
				<p>Atomically replace <em>expected</em> with <em>replacement</em> for
<em>key</em> in <em>record</em> if and only if <em>expected</em> is
currently stored in the field.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$value</var>,…</dt>
						<dd>the value for which the verify is performed</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record that contains the field</dd>
						<dt><var>$replacement</var>,…</dt>
						<dd>the value to for which the original is swapped</dd>
					</dl></div>

					<h4>Returns</h4>
					<div class="list">
						boolean<br><em>true</em> if and only if both the verification and swap are successful
					</div>




			</div>
			</div></td>
		</tr>
		<tr data-order="verifyOrSet" id="_verifyOrSet">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#_verifyOrSet">#</a>
			<code><a href="source-class-Concourse.html#1217-1250" title="Go to source code">verifyOrSet</a>( <span>string <var>$key</var>,…</span>, <span>mixed <var>$value</var>,…</span>, <span>integer <var>$record</var>,…</span> )</code>

			<div class="description short">
				<p>Atomically verify that <em>key</em> equals <em>expected</em> in
<em>record</em> or set it as such.</p>
			</div>

			<div class="description detailed hidden">
				<p>Atomically verify that <em>key</em> equals <em>expected</em> in
<em>record</em> or set it as such.</p>

<p>Please note that after returning, this method guarantees that
<em>key</em> in <em>record</em> will only contain <em>value</em>, even if
it already existed alongside other values (e.g. calling
concourse.verifyOrSet("inclusive", "bar", 1) will mean that "inclusive"
in record 1 will only have "bar" as a value after returning, even if the
field already contained "bar", "baz" and "apple" as values.</p>

<p><em>So, basically, this method has the same guarantee as the [#set]
method, except it will not create any new revisions unless it is
necessary to do so.</em> The [#set] method, on the other hand, would
indiscriminately clear all the values for <em>key</em> in
<em>record</em> before adding <em>value</em>, even if <em>value</em>
already existed.</p>

<p>If you want to add a new value only if it does not exist, while also
preserving other values, you should use the [#add] method instead.</p>


					<h4>Parameters</h4>
					<div class="list"><dl>
						<dt><var>$key</var>,…</dt>
						<dd>the field name</dd>
						<dt><var>$value</var>,…</dt>
						<dd>the value to ensure exists alone in the field</dd>
						<dt><var>$record</var>,…</dt>
						<dd>the record that contains the field</dd>
					</dl></div>





			</div>
			</div></td>
		</tr>
		<tr data-order="__toString" id="___toString">

			<td class="attributes"><code>
				 public 
				
				
				</code>
			</td>

			<td class="name"><div>
			<a class="anchor" href="#___toString">#</a>
			<code><a href="source-class-Concourse.html#1252-1257" title="Go to source code">__toString</a>( )</code>

			<div class="description short">
				
			</div>

			<div class="description detailed hidden">
				





					<h4>Override</h4>
					<div class="list">
					</div>


			</div>
			</div></td>
		</tr>
			</table>
		</div>











</div>
	</div>

	<div id="footer">
		Concourse PHP Driver API documentation generated by <a href="http://apigen.org">ApiGen</a>
	</div>
</div>
<script src="resources/combined.js"></script>
<script src="elementlist.js"></script>
</body>
</html>
